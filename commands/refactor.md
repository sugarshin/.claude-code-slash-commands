---
description: "コードのリファクタリングを提案・実行します"
allowed-tools: ["Read", "Edit", "Grep", "Bash"]
---

# Code Refactoring Assistant

このコマンドはコードの品質向上とメンテナンス性の改善を目的としたリファクタリングを支援します：

## リファクタリング項目

### 1. **構造的改善**
- **関数の分割**: 長い関数を複数の小さな関数に分割
- **クラスの分割**: 責任が多すぎるクラスを適切に分割
- **モジュール化**: 関連する機能をモジュールにまとめる
- **重複コード除去**: DRY原則に従って重複を排除

### 2. **命名の改善**
- **変数名**: より意味のある名前に変更
- **関数名**: 動作を明確に表現する名前に変更
- **クラス名**: 責任を明確に表現する名前に変更
- **一貫性**: プロジェクト全体での命名規則の統一

### 3. **パフォーマンス最適化**
- **アルゴリズムの改善**: より効率的なアルゴリズムの提案
- **データ構造の最適化**: 適切なデータ構造の選択
- **メモリ使用量の削減**: 不要なオブジェクトの削除
- **計算の最適化**: 重複する計算の削除

### 4. **可読性の向上**
- **コメントの追加**: 複雑な処理への説明追加
- **コードフォーマット**: 一貫したフォーマットの適用
- **条件分岐の簡略化**: 複雑な条件を読みやすく改善
- **エラーハンドリング**: より明確なエラー処理

## 使用方法

全体的なリファクタリング分析：
```
/refactor
```

特定のファイルをリファクタリング：
```
/refactor src/components/Header.tsx
```

特定の機能をリファクタリング：
```
/refactor "認証機能"
```

パフォーマンス重視のリファクタリング：
```
/refactor --performance
```

## リファクタリング手順

### 1. **分析フェーズ**
- 現在のコードの構造を理解
- 問題点やボトルネックの特定
- 改善の優先順位を決定

### 2. **設計フェーズ**
- 改善案の設計
- 変更による影響の評価
- テスト戦略の策定

### 3. **実装フェーズ**
- 段階的な変更の実施
- 各段階でのテスト実行
- 動作確認とバグ修正

### 4. **検証フェーズ**
- 改善効果の測定
- パフォーマンステスト
- 品質メトリクスの確認

## 提案内容

### 🔍 **問題の特定**
- **技術的負債**: 将来的な問題となる可能性のあるコード
- **コード臭**: 品質の低い箇所の特定
- **パフォーマンス問題**: ボトルネックの特定
- **メンテナンス性**: 変更が困難な箇所の特定

### 💡 **改善提案**
- **Before/After**: 変更前後のコード比較
- **理由**: なぜその変更が必要かの説明
- **メリット**: 改善によって得られる利益
- **リスク**: 変更によるリスクと軽減策

### ✅ **実装計画**
- **優先順位**: 改善の順序
- **工数見積もり**: 各改善に必要な時間
- **影響範囲**: 変更が及ぼす影響
- **テスト計画**: 検証方法

---

コードベースを分析し、$ARGUMENTS で指定されたファイルまたは機能を中心にリファクタリングの提案を行います。指定がない場合は、最も改善効果の高い箇所を特定して提案します。